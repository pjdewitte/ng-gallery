
'use strict';

var configClient = require("../../../config-client");

///////////////////////////////////////////////////////////////////////////////
//
//
///////////////////////////////////////////////////////////////////////////////
angular.module('Autodesk.ADN.NgGallery.Dialog.Item',[])

  /////////////////////////////////////////////////////////////////////////////
  //
  //
  /////////////////////////////////////////////////////////////////////////////
  .controller('Autodesk.ADN.NgGallery.Dialog.Item.Controller',

  ['$scope', '$http', '$sce', function($scope, $http, $sce) {

    ///////////////////////////////////////////////////////////////////////////
    //
    //
    ///////////////////////////////////////////////////////////////////////////
    $scope.item = {
      name: '',
      mode:'',
      message: '',
      caption: '',
      placeholder: ''
    };

    ///////////////////////////////////////////////////////////////////////////
    //
    //
    ///////////////////////////////////////////////////////////////////////////
    $scope.totrusted = function(html) {

      return $sce.trustAsHtml(html);
    }

    ///////////////////////////////////////////////////////////////////////////
    //
    //
    ///////////////////////////////////////////////////////////////////////////
    $scope.onOk = null;

    ///////////////////////////////////////////////////////////////////////////
    //
    //
    ///////////////////////////////////////////////////////////////////////////
    $scope.$on('dlg.itemDlg', function (event, data) {

      $scope.item = {
        name: '',
        mode: data.mode,
        message: data.message,
        caption: data.caption,
        placeholder: data.placeholder
      };

      $scope.onOk = function() {

        // success
        $scope.$emit('app.EmitMessage', {
          msgId: data.eventId,
          msgArgs: {
            args: {
              name: $scope.item.name,
              callingArgs: data
            }
          }
        });
      };

      $('#itemDlg').modal('show');
    });

  }]);



